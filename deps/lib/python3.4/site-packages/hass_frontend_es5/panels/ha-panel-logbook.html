<html><head></head><body><div hidden="" by-polymer-bundler=""><dom-module id="domain-icon" assetpath="../../src/components/"><template><iron-icon icon="[[computeIcon(domain, state)]]"></iron-icon></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),DomainIcon=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"computeIcon",value:function(e,t){return window.hassUtil.domainIcon(e,t)}}],[{key:"is",get:function(){return"domain-icon"}},{key:"properties",get:function(){return{domain:{type:String,value:""},state:{type:String,value:""}}}}]),t}();customElements.define(DomainIcon.is,DomainIcon);</script><dom-module id="ha-logbook"><template><style is="custom-style" include="iron-flex"></style><style>:host{display:block;}.entry{@apply (--paper-font-body1);line-height:2em;}.time{width:55px;font-size:.8em;color:var(--secondary-text-color);}domain-icon{margin:0 8px 0 16px;color:var(--primary-text-color);}.message{color:var(--primary-text-color);}a{color:var(--primary-color);}</style><template is="dom-if" if="[[!entries.length]]">No logbook entries found.</template><template is="dom-repeat" items="[[entries]]"><div class="horizontal layout entry"><div class="time">[[formatTime(item.when)]]</div><domain-icon domain="[[item.domain]]" class="icon"></domain-icon><div class="message" flex=""><template is="dom-if" if="[[!item.entity_id]]"><span class="name">[[item.name]]</span></template><template is="dom-if" if="[[item.entity_id]]"><a href="#" on-tap="entityClicked" class="name">[[item.name]]</a></template><span></span> <span>[[item.message]]</span></div></div></template></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),HaLogbook=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.EventsMixin(Polymer.Element)),_createClass(t,[{key:"formatTime",value:function(e){return window.hassUtil.formatTime(new Date(e))}},{key:"entityClicked",value:function(e){e.preventDefault(),this.fire("hass-more-info",{entityId:e.model.item.entity_id})}}],[{key:"is",get:function(){return"ha-logbook"}},{key:"properties",get:function(){return{hass:{type:Object},entries:{type:Array,value:[]}}}}]),t}();customElements.define(HaLogbook.is,HaLogbook);</script><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),DATE_CACHE={},HaLogbookData=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,Polymer.Element),_createClass(t,[{key:"hassChanged",value:function(e,t){!t&&this.filterDate&&this.filterDateChanged(this.filterDate)}},{key:"filterDateChanged",value:function(e){this.hass&&(this._setIsLoading(!0),this.getDate(e).then(function(e){this._setEntries(e),this._setIsLoading(!1)}.bind(this)))}},{key:"getDate",value:function(e){return DATE_CACHE[e]||(DATE_CACHE[e]=this.hass.callApi("GET","logbook/"+e).then(function(e){return e.reverse(),e},function(){return DATE_CACHE[e]=!1,null})),DATE_CACHE[e]}}],[{key:"is",get:function(){return"ha-logbook-data"}},{key:"properties",get:function(){return{hass:{type:Object,observer:"hassChanged"},filterDate:{type:String,observer:"filterDateChanged"},isLoading:{type:Boolean,value:!0,readOnly:!0,notify:!0},entries:{type:Object,value:null,readOnly:!0,notify:!0}}}}]),t}();customElements.define(HaLogbookData.is,HaLogbookData);</script></div><dom-module id="ha-panel-logbook"><template><style include="ha-style">.content{padding:0 16px 16px;}paper-spinner{position:absolute;top:15px;left:186px;}vaadin-date-picker{--vaadin-date-picker-clear-icon:{display:none;};margin-bottom:24px;max-width:200px;}[hidden]{display:none !important;}</style><ha-logbook-data hass="[[hass]]" is-loading="{{isLoading}}" entries="{{entries}}" filter-date="[[_computeFilterDate(_currentDate)]]"></ha-logbook-data><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><ha-menu-button narrow="[[narrow]]" show-menu="[[showMenu]]"></ha-menu-button><div main-title="">[[localize('panel.logbook')]]</div></app-toolbar></app-header><div class="content"><paper-spinner active="[[isLoading]]" hidden$="[[!isLoading]]" alt="[[localize('ui.common.loading')]]"></paper-spinner><vaadin-date-picker id="picker" value="{{_currentDate}}" label="[[localize('ui.panel.logbook.showing_entries')]]" disabled="[[isLoading]]"></vaadin-date-picker><ha-logbook hass="[[hass]]" entries="[[entries]]" hidden$="[[isLoading]]"></ha-logbook></div></app-header-layout></template></dom-module><script>function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(r)},HaPanelLogbook=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,window.hassMixins.LocalizeMixin(Polymer.Element)),_createClass(t,[{key:"connectedCallback",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"connectedCallback",this).call(this);var e=new Date;this.$.picker.set("i18n.parseDate",function(){return e}),this.$.picker.set("i18n.formatDate",function(t){return e=t,window.hassUtil.formatDate(t)})}},{key:"_computeFilterDate",value:function(e){if(e){var t=e.split("-");return t[1]=parseInt(t[1])-1,new Date(t[0],t[1],t[2]).toISOString()}}}],[{key:"is",get:function(){return"ha-panel-logbook"}},{key:"properties",get:function(){return{hass:{type:Object},narrow:{type:Boolean,value:!1},showMenu:{type:Boolean,value:!1},_currentDate:{type:String,value:function(){var e=new Date;return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())).toISOString().split("T")[0]}},isLoading:{type:Boolean},entries:{type:Array},datePicker:{type:Object}}}}]),t}();customElements.define(HaPanelLogbook.is,HaPanelLogbook);</script></body></html>