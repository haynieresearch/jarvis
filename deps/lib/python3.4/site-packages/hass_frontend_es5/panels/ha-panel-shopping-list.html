<html><head></head><body><dom-module id="ha-panel-shopping-list"><template><style include="ha-style">:host{height:100%;}app-toolbar paper-listbox{width:150px;}app-toolbar paper-item{cursor:pointer;}.content{padding-bottom:32px;max-width:600px;margin:0 auto;}paper-card{display:block;}paper-icon-item{border-top:1px solid var(--divider-color);}paper-icon-item:first-child{border-top:0;}paper-checkbox{padding:11px;}paper-input{--paper-input-container-underline:{display:none;};--paper-input-container-underline-focus:{display:none;};position:relative;top:1px;}.tip{padding:24px;text-align:center;color:var(--secondary-text-color);}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><ha-menu-button narrow="[[narrow]]" show-menu="[[showMenu]]"></ha-menu-button><div main-title="">[[localize('panel.shopping_list')]]</div><ha-start-voice-button hass="[[hass]]" can-listen="{{canListen}}"></ha-start-voice-button><paper-menu-button horizontal-align="right" horizontal-offset="-5" vertical-offset="-5"><paper-icon-button icon="mdi:dots-vertical" slot="dropdown-trigger"></paper-icon-button><paper-listbox slot="dropdown-content"><paper-item on-tap="_clearCompleted">[[localize('ui.panel.shopping-list.clear_completed')]]</paper-item></paper-listbox></paper-menu-button></app-toolbar></app-header><div class="content"><paper-card><paper-icon-item on-focus="_focusRowInput"><paper-icon-button slot="item-icon" icon="mdi:plus" on-tap="_addItem"></paper-icon-button><paper-item-body><paper-input id="addBox" placeholder="[[localize('ui.panel.shopping-list.add_item')]]" on-keydown="_addKeyPress" no-label-float=""></paper-input></paper-item-body></paper-icon-item><template is="dom-repeat" items="[[items]]"><paper-icon-item><paper-checkbox slot="item-icon" checked="{{item.complete}}" on-tap="_itemCompleteTapped" tabindex="0"></paper-checkbox><paper-item-body><paper-input id="editBox" no-label-float="" value="[[item.name]]" on-change="_saveEdit"></paper-input></paper-item-body></paper-icon-item></template></paper-card><div class="tip" hidden$="[[!canListen]]">[[localize('ui.panel.shopping-list.microphone_tip')]]</div></div></app-header-layout></template></dom-module><script>function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),_get=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in o)return o.value;var s=o.get;if(void 0!==s)return s.call(i)},HaPanelShoppingList=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,window.hassMixins.LocalizeMixin(Polymer.Element)),_createClass(e,[{key:"connectedCallback",value:function(){_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"connectedCallback",this).call(this),this._fetchData=this._fetchData.bind(this),this.hass.connection.subscribeEvents(this._fetchData,"shopping_list_updated").then(function(t){this._unsubEvents=t}.bind(this)),this._fetchData()}},{key:"disconnectedCallback",value:function(){_get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disconnectedCallback",this).call(this),this._unsubEvents&&this._unsubEvents()}},{key:"_fetchData",value:function(){this.hass.callApi("get","shopping_list").then(function(t){t.reverse(),this.items=t}.bind(this))}},{key:"_itemCompleteTapped",value:function(t){var e=this;t.stopPropagation();var n=t.model.item;this.hass.callApi("post","shopping_list/item/"+n.id,{complete:!n.complete}).catch(function(){return e._fetchData()})}},{key:"_addItem",value:function(t){var e=this;this.hass.callApi("post","shopping_list/item",{name:this.$.addBox.value}).catch(function(){return e._fetchData()}),this.$.addBox.value="",t&&setTimeout(function(){return e.$.addBox.focus()},10)}},{key:"_addKeyPress",value:function(t){13===t.keyCode&&this._addItem()}},{key:"_saveEdit",value:function(t){var e=this,n=t.model,i=n.index,o=n.item,a=t.target.value;a!==o.name&&(this.set(["items",i,"name"],a),this.hass.callApi("post","shopping_list/item/"+o.id,{name:a}).catch(function(){return e._fetchData()}))}},{key:"_clearCompleted",value:function(){this.hass.callApi("POST","shopping_list/clear_completed")}}],[{key:"is",get:function(){return"ha-panel-shopping-list"}},{key:"properties",get:function(){return{hass:Object,narrow:Boolean,showMenu:Boolean,canListen:Boolean,items:{type:Array,value:[]}}}}]),e}();customElements.define(HaPanelShoppingList.is,HaPanelShoppingList);</script></body></html>