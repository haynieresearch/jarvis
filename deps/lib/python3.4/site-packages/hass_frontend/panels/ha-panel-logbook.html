<html><head></head><body><div hidden="" by-polymer-bundler=""><dom-module id="domain-icon" assetpath="../../src/components/"><template><iron-icon icon="[[computeIcon(domain, state)]]"></iron-icon></template></dom-module><script>class DomainIcon extends Polymer.Element{static get is(){return"domain-icon"}static get properties(){return{domain:{type:String,value:""},state:{type:String,value:""}}}computeIcon(e,n){return window.hassUtil.domainIcon(e,n)}}customElements.define(DomainIcon.is,DomainIcon);</script><dom-module id="ha-logbook"><template><style is="custom-style" include="iron-flex"></style><style>:host{display:block;}.entry{@apply (--paper-font-body1);line-height:2em;}.time{width:55px;font-size:.8em;color:var(--secondary-text-color);}domain-icon{margin:0 8px 0 16px;color:var(--primary-text-color);}.message{color:var(--primary-text-color);}a{color:var(--primary-color);}</style><template is="dom-if" if="[[!entries.length]]">No logbook entries found.</template><template is="dom-repeat" items="[[entries]]"><div class="horizontal layout entry"><div class="time">[[formatTime(item.when)]]</div><domain-icon domain="[[item.domain]]" class="icon"></domain-icon><div class="message" flex=""><template is="dom-if" if="[[!item.entity_id]]"><span class="name">[[item.name]]</span></template><template is="dom-if" if="[[item.entity_id]]"><a href="#" on-tap="entityClicked" class="name">[[item.name]]</a></template><span></span> <span>[[item.message]]</span></div></div></template></template></dom-module><script>class HaLogbook extends(window.hassMixins.EventsMixin(Polymer.Element)){static get is(){return"ha-logbook"}static get properties(){return{hass:{type:Object},entries:{type:Array,value:[]}}}formatTime(e){return window.hassUtil.formatTime(new Date(e))}entityClicked(e){e.preventDefault(),this.fire("hass-more-info",{entityId:e.model.item.entity_id})}}customElements.define(HaLogbook.is,HaLogbook);</script><script>{var DATE_CACHE={};class e extends Polymer.Element{static get is(){return"ha-logbook-data"}static get properties(){return{hass:{type:Object,observer:"hassChanged"},filterDate:{type:String,observer:"filterDateChanged"},isLoading:{type:Boolean,value:!0,readOnly:!0,notify:!0},entries:{type:Object,value:null,readOnly:!0,notify:!0}}}hassChanged(e,t){!t&&this.filterDate&&this.filterDateChanged(this.filterDate)}filterDateChanged(e){this.hass&&(this._setIsLoading(!0),this.getDate(e).then(function(e){this._setEntries(e),this._setIsLoading(!1)}.bind(this)))}getDate(e){return DATE_CACHE[e]||(DATE_CACHE[e]=this.hass.callApi("GET","logbook/"+e).then(function(e){return e.reverse(),e},function(){return DATE_CACHE[e]=!1,null})),DATE_CACHE[e]}}customElements.define(e.is,e)}</script></div><dom-module id="ha-panel-logbook"><template><style include="ha-style">.content{padding:0 16px 16px;}paper-spinner{position:absolute;top:15px;left:186px;}vaadin-date-picker{--vaadin-date-picker-clear-icon:{display:none;};margin-bottom:24px;max-width:200px;}[hidden]{display:none !important;}</style><ha-logbook-data hass="[[hass]]" is-loading="{{isLoading}}" entries="{{entries}}" filter-date="[[_computeFilterDate(_currentDate)]]"></ha-logbook-data><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><ha-menu-button narrow="[[narrow]]" show-menu="[[showMenu]]"></ha-menu-button><div main-title="">Logbook</div></app-toolbar></app-header><div class="content"><paper-spinner active="[[isLoading]]" hidden$="[[!isLoading]]" alt="Loading logbook entries"></paper-spinner><vaadin-date-picker id="picker" value="{{_currentDate}}" label="Showing entries for" disabled="[[isLoading]]"></vaadin-date-picker><ha-logbook hass="[[hass]]" entries="[[entries]]" hidden$="[[isLoading]]"></ha-logbook></div></app-header-layout></template></dom-module><script>class HaPanelLogbook extends Polymer.Element{static get is(){return"ha-panel-logbook"}static get properties(){return{hass:{type:Object},narrow:{type:Boolean,value:!1},showMenu:{type:Boolean,value:!1},_currentDate:{type:String,value:function(){var e=new Date;return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())).toISOString().split("T")[0]}},isLoading:{type:Boolean},entries:{type:Array},datePicker:{type:Object}}}connectedCallback(){super.connectedCallback();var e=new Date;this.$.picker.set("i18n.parseDate",function(){return e}),this.$.picker.set("i18n.formatDate",function(t){return e=t,window.hassUtil.formatDate(t)})}_computeFilterDate(e){if(e){var t=e.split("-");return t[1]=parseInt(t[1])-1,new Date(t[0],t[1],t[2]).toISOString()}}}customElements.define(HaPanelLogbook.is,HaPanelLogbook);</script></body></html>